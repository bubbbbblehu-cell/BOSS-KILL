================================================================================
                    BOSS KILL 后端项目目录结构
================================================================================

技术栈：Node.js + Express + MySQL + Redis


boss-kill-api/
│
├── package.json                    # 项目依赖配置
├── package-lock.json               # 依赖版本锁定
├── .env.example                    # 环境变量示例（不含敏感信息）
├── .gitignore                      # Git忽略文件
├── README.md                       # 项目说明
│
├── app.js                          # 应用入口
├── server.js                       # 服务器启动文件
│
├── src/                            # 源代码目录
│   │
│   ├── config/                     # 配置文件
│   │   ├── index.js                # 配置入口（读取环境变量）
│   │   ├── database.js             # 数据库配置
│   │   ├── redis.js                # Redis 配置
│   │   └── security.js             # 安全相关配置
│   │
│   ├── routes/                     # 路由定义
│   │   ├── index.js                # 路由入口（汇总所有路由）
│   │   ├── auth.routes.js          # 认证路由 /api/auth/*
│   │   ├── user.routes.js          # 用户路由 /api/user/*
│   │   ├── slide.routes.js         # 滑一滑路由 /api/slide/*
│   │   ├── draw.routes.js          # 绘画路由 /api/draw/*
│   │   ├── map.routes.js           # 地图路由 /api/map/*
│   │   ├── recommend.routes.js     # 推荐路由 /api/recommend/*
│   │   ├── points.routes.js        # 积分路由 /api/points/*
│   │   ├── notify.routes.js        # 通知路由 /api/notify/*
│   │   └── admin.routes.js         # 管理路由 /api/admin/*
│   │
│   ├── controllers/                # 控制器（处理请求逻辑）
│   │   ├── auth.controller.js      # 认证控制器
│   │   ├── user.controller.js      # 用户控制器
│   │   ├── slide.controller.js     # 滑一滑控制器
│   │   ├── draw.controller.js      # 绘画控制器
│   │   ├── map.controller.js       # 地图控制器
│   │   ├── recommend.controller.js # 推荐控制器
│   │   ├── points.controller.js    # 积分控制器
│   │   ├── notify.controller.js    # 通知控制器
│   │   └── admin.controller.js     # 管理控制器
│   │
│   ├── services/                   # 业务逻辑层
│   │   ├── auth.service.js         # 认证业务（登录/注册/Token）
│   │   ├── user.service.js         # 用户业务
│   │   ├── slide.service.js        # 滑一滑业务（Top3/推荐算法）
│   │   ├── draw.service.js         # 绘画业务（作品/贴纸）
│   │   ├── map.service.js          # 地图业务（便便/屎塔计算）
│   │   ├── recommend.service.js    # 推荐业务（推荐算法）
│   │   ├── points.service.js       # 积分业务（积分计算/打卡）
│   │   ├── notify.service.js       # 通知业务（推送/邮件）
│   │   └── review.service.js       # 审核业务（内容审核）
│   │
│   ├── models/                     # 数据模型
│   │   ├── index.js                # 模型入口
│   │   ├── user.model.js           # 用户模型
│   │   ├── work.model.js           # 作品模型
│   │   ├── sticker.model.js        # 贴纸模型
│   │   ├── poop.model.js           # 便便点模型
│   │   ├── tower.model.js          # 屎塔模型
│   │   ├── points.model.js         # 积分模型
│   │   └── notification.model.js   # 通知模型
│   │
│   ├── middlewares/                # 中间件（安全防护核心）
│   │   ├── auth.middleware.js      # 认证中间件（Token验证）
│   │   ├── admin.middleware.js     # 管理员权限中间件
│   │   ├── rateLimit.middleware.js # 请求限流中间件
│   │   ├── validator.middleware.js # 参数校验中间件
│   │   ├── security.middleware.js  # 安全防护中间件（XSS/SQL注入）
│   │   ├── cors.middleware.js      # 跨域处理
│   │   └── error.middleware.js     # 错误处理中间件
│   │
│   ├── utils/                      # 工具函数
│   │   ├── response.js             # 统一响应格式
│   │   ├── logger.js               # 日志工具
│   │   ├── crypto.js               # 加密工具（密码/Token）
│   │   ├── validator.js            # 数据验证工具
│   │   ├── email.js                # 邮件发送工具
│   │   ├── upload.js               # 文件上传工具
│   │   └── cache.js                # 缓存工具（Redis封装）
│   │
│   ├── validators/                 # 请求参数验证规则
│   │   ├── auth.validator.js       # 认证参数验证
│   │   ├── user.validator.js       # 用户参数验证
│   │   ├── draw.validator.js       # 绘画参数验证
│   │   └── map.validator.js        # 地图参数验证
│   │
│   └── constants/                  # 常量定义
│       ├── errorCodes.js           # 错误码定义
│       ├── statusCodes.js          # 状态码定义
│       └── config.js               # 业务常量
│
├── database/                       # 数据库相关
│   ├── migrations/                 # 数据库迁移脚本
│   │   ├── 001_create_users.sql
│   │   ├── 002_create_works.sql
│   │   └── ...
│   │
│   ├── seeds/                      # 初始化数据
│   │   ├── stickers.seed.js        # 贴纸初始数据
│   │   └── brush_options.seed.js   # 画笔选项数据
│   │
│   └── init.sql                    # 数据库初始化总脚本
│
├── uploads/                        # 上传文件目录（开发环境）
│   ├── avatars/                    # 用户头像
│   ├── works/                      # 绘画作品
│   └── temp/                       # 临时文件
│
├── logs/                           # 日志目录
│   ├── access.log                  # 访问日志
│   ├── error.log                   # 错误日志
│   └── security.log                # 安全日志
│
├── scripts/                        # 脚本文件
│   ├── deploy.sh                   # 部署脚本
│   ├── backup.sh                   # 备份脚本
│   └── init-db.sh                  # 数据库初始化脚本
│
└── tests/                          # 测试文件
    ├── unit/                       # 单元测试
    │   ├── services/
    │   └── utils/
    │
    └── integration/                # 集成测试
        ├── auth.test.js
        └── api.test.js


================================================================================
                              目录说明
================================================================================

【分层架构说明】

    请求流程：
    
    客户端请求
        ↓
    routes/         路由层：定义 API 路径，分发请求
        ↓
    middlewares/    中间件：认证、限流、参数校验、安全检查
        ↓
    controllers/    控制层：接收请求，调用服务，返回响应
        ↓
    services/       服务层：处理业务逻辑
        ↓
    models/         数据层：与数据库交互
        ↓
    database        数据库


【安全相关文件】

    middlewares/auth.middleware.js      - Token 验证
    middlewares/rateLimit.middleware.js - 防止接口刷爆
    middlewares/security.middleware.js  - 防 XSS/SQL注入
    middlewares/validator.middleware.js - 参数合法性检查
    utils/crypto.js                     - 密码加密
    logs/security.log                   - 安全事件日志
